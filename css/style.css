:root {
    --font-fam: 'Cairo', 'Segoe UI', sans-serif;
    --font-size: 13px;
    --radius: 12px;
    
    /* DEFAULT THEME (LIGHT) */
    --bg-grad: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    --glass-bg: rgba(255, 255, 255, 0.9);
    --glass-border: 1px solid rgba(255, 255, 255, 0.6);
    --txt-main: #2d3436; 
    --txt-sec: #636e72;
    --primary: #6c5ce7; 
    --secondary: #00cec9; 
    --accent: #ff7675; 
    --success: #00b894;
    --danger: #d63031;
    --card-shadow: 0 4px 6px rgba(0,0,0,0.05);
    
    /* PARTICLE COLOR (CSS controlled) */
    --particle-col: rgba(0,0,0,0.08); 
    /* Preview for chips */
    --theme-preview: #f0f0f0; 
}

/* THEMES */
[data-theme="dark"] { 
    --bg-grad: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
    --glass-bg: rgba(30, 30, 30, 0.95);
    --glass-border: 1px solid rgba(255, 255, 255, 0.1);
    --txt-main: #eee; --txt-sec: #aaa; --primary: #a29bfe; --theme-preview: #333;
    --particle-col: rgba(255,255,255,0.08); 
}

[data-theme="midnight"] {
    --bg-grad: linear-gradient(to top, #0f2027, #203a43, #2c5364);
    --glass-bg: rgba(10,25,35,0.96);
    --primary: #f39c12; --txt-main:#ddd; --txt-sec:#bbb; --theme-preview: #0f2027;
}

[data-theme="forest"] {
    --bg-grad: linear-gradient(135deg, #134E5E 0%, #71B280 100%);
    --glass-bg: rgba(20, 80, 95, 0.95);
    --primary: #aed581; --txt-main:#e8f5e9; --txt-sec:#b2dfdb; --theme-preview: #134E5E;
}

[data-theme="sunset"] {
    --bg-grad: linear-gradient(120deg, #f6d365 0%, #fda085 100%);
    --glass-bg: rgba(255, 250, 240, 0.93);
    --primary: #ff6b6b; --txt-main:#d35400; --theme-preview: #fda085;
}

[data-theme="ocean"] {
    --bg-grad: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);
    --glass-bg: rgba(240, 250, 255, 0.9);
    --primary: #0984e3; --txt-main:#064070; --theme-preview: #a1c4fd;
}

/* CORE LAYOUT */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
html, body { margin:0; padding:0; height:100%; font-family: var(--font-fam); font-size: var(--font-size); color: var(--txt-main); background: var(--bg-grad) fixed; overflow: hidden; transition: background 0.4s ease; }

/* LAYERS */
#bg-canvas { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
#lock-screen { position: fixed; inset: 0; background:#111; color:#fff; display: flex; flex-direction:column; justify-content:center; align-items:center; z-index:9999; }

.container { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; max-width: 600px; margin: 0 auto; }
.glass-box { background: var(--glass-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: var(--glass-border); border-radius: var(--radius); margin-bottom: 8px; box-shadow: var(--card-shadow); }
.hidden { display: none !important; }

/* COMPONENTS */
.app-header { display:flex; justify-content:space-between; align-items:center; padding:8px 12px; flex-shrink:0; }
.user-profile-header { display:flex; gap:8px; align-items:center; cursor:pointer; }
.u-avatar { width:38px; height:38px; border-radius:50%; background:rgba(0,0,0,0.1); border:2px solid var(--primary); display:flex; align-items:center; justify-content:center; font-size:1.3em; }
.u-info { display:flex; flex-direction:column; line-height:1.1; }
#db-status { font-size:0.75em; opacity:0.7; }

#main-content { flex:1; display:flex; flex-direction:column; overflow:hidden; padding:5px; position:relative; }

/* HOME GRID */
.grid-menu { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; overflow-y: auto; padding-bottom: 50px; align-content: start; }
.full-span-card { grid-column: 1 / -1; }
.clickable { cursor:pointer; }
.compact-row { display:flex; align-items:center; padding:10px; justify-content:space-between; min-height:50px; }
.vr { width:1px; background:var(--txt-sec); height:25px; opacity:0.3; margin:0 8px; }
.mini-stat { display:flex; gap:8px; align-items:center; flex:1; }
.ring-sm { width:40px; height:40px; border-radius:50%; background:var(--txt-sec); display:flex; align-items:center; justify-content:center; position:relative; }
.ring-sm::after { content:''; position:absolute; inset:4px; background:var(--glass-bg); border-radius:50%; }
.ring-sm span { position:absolute; z-index:1; font-size:0.7em; }
.filter-box { flex:1.2; text-align:right; font-size:0.9em; display:flex; flex-direction:column; }
.filter-box select { background:transparent; border:1px solid var(--txt-sec); color:var(--txt-main); border-radius:4px; margin-top:2px; font-family:inherit; }

/* MENU CARDS */
.menu-card { display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:10px; min-height:90px; cursor:pointer; transition:transform 0.1s; border:1px solid transparent; }
.menu-card:active { transform:scale(0.96); }
.menu-card .icon { font-size:2em; margin-bottom:5px; }
.primary-card { background:var(--primary); color:#fff; }
.danger-card { color:var(--danger); border-color:rgba(214, 48, 49, 0.3); }
.warn-card { color:#f39c12; border-color:rgba(243, 156, 18, 0.3); }

/* SELECTION */
.column-flex { display:flex; flex-direction:column; height:100%; }
.view-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:5px; flex-shrink:0; }
.sel-list { flex:1; overflow-y:auto; padding:5px; }
.sticky-footer { margin-top:auto; padding-top:8px; }
.flex-row { display:flex; width:100%; } .gap-5 { gap:5px; } .flex-1 { flex:1; }

.chip { padding:6px 12px; margin:3px; display:inline-block; background:rgba(120,120,120,0.1); border-radius:20px; cursor:pointer; font-size:0.9em; border:1px solid transparent; transition:0.2s; }
.chip.selected { background:var(--primary); color:#fff; box-shadow:0 3px 8px rgba(0,0,0,0.2); }
.scroll-chips { display:flex; flex-wrap:wrap; gap:5px; padding:5px 0; }
.theme-preview-chip { width:30px; height:30px; border-radius:50%; border:1px solid rgba(0,0,0,0.1); }

/* QUIZ */
.quiz-view { flex:1; display:flex; flex-direction:column; overflow:hidden; }
.quiz-nav-top { display:flex; justify-content:space-between; align-items:center; margin-bottom:5px; }
#timer-bar { height:4px; background:var(--danger); margin-bottom:4px; display:none; width:100%; }
.question-box { padding:15px; overflow-y:auto; max-height:35vh; margin-bottom:5px; line-height:1.5; direction:ltr; text-align:left; font-size:1.1em; }
.quiz-controls-row { display:flex; justify-content:center; gap:10px; flex-shrink:0; margin:5px 0; }
.options-list { flex:1; overflow-y:auto; padding:5px; display:flex; flex-direction:column; gap:8px; }

.opt { padding:14px; background:rgba(255,255,255,0.05); border:1px solid var(--txt-sec); border-radius:var(--radius); cursor:pointer; direction:ltr; text-align:left; position:relative; transition:none; }
.opt.selected { border:2px solid var(--primary); background:rgba(127,127,127,0.1); }
.opt.correct { background:rgba(46, 204, 113, 0.3); border-color: #2ecc71; }
.opt.wrong { background:rgba(231, 76, 60, 0.3); border-color: #e74c3c; }

.explanation { background:rgba(241, 196, 15, 0.1); border-left:4px solid #f1c40f; padding:10px; font-size:0.9em; margin-top:5px; flex-shrink:0; }
.quiz-footer { margin-top:auto; padding-top:8px; flex-shrink:0; }

/* MODALS */
.modal { position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:999; display:none; align-items:center; justify-content:center; backdrop-filter:blur(3px); }
.modal-content { background:var(--glass-bg); padding:20px; width:88%; max-width:320px; border-radius:var(--radius); text-align:center; max-height:85vh; overflow-y:auto; }
.vertical { display:flex; flex-direction:column; gap:8px; }
.inp-box { width:100%; padding:10px; border-radius:8px; border:1px solid var(--txt-sec); background:rgba(255,255,255,0.2); color:var(--txt-main); }
.set-row { display:flex; justify-content:space-between; align-items:center; margin:6px 0; border-bottom:1px solid rgba(0,0,0,0.05); padding-bottom:5px; }
.mt-10 { margin-top:10px; } .text-left { text-align:left; direction:ltr; }
.lbl-sm { font-size:0.85em; opacity:0.7; margin-top:5px; display:block; }

/* STATS TABLE */
.stats-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:10px 0; }
.stats-grid div { background:rgba(0,0,0,0.05); padding:10px; border-radius:8px; }
.t-green { color:#00b894; font-weight:bold; } .t-red { color:#d63031; font-weight:bold; }

/* ELEMENTS */
.btn { border:none; border-radius:8px; padding:10px; cursor:pointer; font-weight:bold; display:flex; align-items:center; justify-content:center; }
.btn-primary { background:var(--primary); color:#fff; }
.btn-accent { background:var(--accent); color:#fff; }
.btn-sec { background:transparent; border:1px solid var(--txt-sec); color:var(--txt-sec); }
.btn-ghost { background:transparent; color:var(--txt-main); padding:6px; font-size:1.2em; }
.btn-nav { border:1px solid var(--txt-sec); background:rgba(255,255,255,0.1); width:100px; color:var(--txt-main); }
.full-width { width:100%; }

/* SCROLLBAR */
::-webkit-scrollbar { width:4px; } ::-webkit-scrollbar-thumb { background:rgba(0,0,0,0.2); border-radius:4px; }
